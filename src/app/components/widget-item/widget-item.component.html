<div class="widget-item" 
     [class.active]="widget.active"
     (click)="onWidgetClick()">
  
  <div class="widget-header">
    <img [src]="widget.icon" alt="Widget icon" class="widget-icon">
    <h3 class="widget-title">{{ widget.title }}</h3>
  </div>
  
  <div class="widget-content">
    <!-- Indicateur de chargement -->
    <div *ngIf="isLoading" class="loading-indicator">
      <div class="spinner"></div>
      <p>Chargement...</p>
    </div>
    
    <!-- Message d'erreur -->
    <div *ngIf="hasError" class="error-message">
      <p>Impossible de charger le contenu</p>
    </div>
    
    <!-- iframe pour le contenu du widget -->
    <iframe #iframe
            *ngIf="safeUrl"
            [src]="safeUrl"
            frameborder="0"
            (load)="onIframeLoad()"
            (error)="onIframeError()"
            [style.display]="isLoading ? 'none' : 'block'">
    </iframe>
  </div>
</div>